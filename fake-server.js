const a0_0x1b7824=a0_0x2e04;(function(_0x43f358,_0x120957){const _0x29f781=a0_0x2e04,_0x3c516d=_0x43f358();while(!![]){try{const _0x1bd7b5=-parseInt(_0x29f781(0x12e))/0x1*(-parseInt(_0x29f781(0x156))/0x2)+parseInt(_0x29f781(0x13d))/0x3*(-parseInt(_0x29f781(0x154))/0x4)+parseInt(_0x29f781(0x188))/0x5*(-parseInt(_0x29f781(0x16b))/0x6)+parseInt(_0x29f781(0x15e))/0x7+parseInt(_0x29f781(0x17a))/0x8*(parseInt(_0x29f781(0x173))/0x9)+-parseInt(_0x29f781(0x158))/0xa*(-parseInt(_0x29f781(0x18f))/0xb)+-parseInt(_0x29f781(0x14a))/0xc;if(_0x1bd7b5===_0x120957)break;else _0x3c516d['push'](_0x3c516d['shift']());}catch(_0x43399d){_0x3c516d['push'](_0x3c516d['shift']());}}}(a0_0x3ba7,0x21c36),require('dotenv')[a0_0x1b7824(0x169)]());const express=require('express'),cors=require(a0_0x1b7824(0x166)),{default:axios}=require(a0_0x1b7824(0x17c)),app=express(),PORT=0x1f40,{v4:uuidv4}=require(a0_0x1b7824(0x183)),dummyData=require(a0_0x1b7824(0x141));app['use'](cors()),app[a0_0x1b7824(0x18a)](express[a0_0x1b7824(0x195)]()),app[a0_0x1b7824(0x18a)](express[a0_0x1b7824(0x193)]('public')),app[a0_0x1b7824(0x18a)]((_0x26825f,_0x5db751,_0x5a8c2b)=>{const _0x335af1=a0_0x1b7824;_0x26825f[_0x335af1(0x146)]=uuidv4(),_0x5db751[_0x335af1(0x134)]('X-Request-ID',_0x26825f[_0x335af1(0x146)]),_0x5a8c2b();});const FROM=a0_0x1b7824(0x162);console[a0_0x1b7824(0x12d)](a0_0x1b7824(0x15f)+FROM+a0_0x1b7824(0x145));function a0_0x3ba7(){const _0x13c700=[']\x20Using\x20dummy\x20data\x20index:\x20','Failed','error','[API][','Noney\x201.0\x20Pro','setHeader','global',']\x20Using\x20STG\x20API','source','Smooth\x20and\x20balanced.','CLAUDE','slice','status','message','699891fuSewQ','[Stream][','/generate_v2','Concise','./dummy_data.json','write','gemini-2.5-pro-preview-05-06','Noney\x201.0\x20Twinkle','\x20mode','requestId','Failed\x20to\x20summarize\x20title','get','finished','55260AdIUBY','[Mock][','xePSzT4DmZQ8G9UkUyeGtF5GEyP2','/health','TSgg30aONkh9v5vAQwfIARODGkj1','claude-sonnet-4@20250514','end','post','length','High-end\x20and\x20smart.','4qAagfr','True','170542ParJWj','Claude\x20Sonnet\x204','21180JSVfPQ','Prompt\x20is\x20required',']\x20Title\x20summarized','gemini-2.5-flash-preview-05-20',']\x20POST\x20/generate_v2','type','814198vLTyRt','[Server]\x20Running\x20in\x20','no-cache','text','PROD','step',']\x20GET\x20/get_models','cool','cors','synapses','body','config','claude-opus-4@20250514','174QtaoGj','Fast,\x20smart,\x20and\x20web-ready.',']\x20Stream\x20error:\x20','GEMINI','/summarise_title','\x0adata:\x20','STG_GENERATE_API','41818501-5e4b-4dfe-8474-95e723437c22','9LOBuIv','Content-Type','application/json','env','[Generate][','556b448c-17b5-4259-be54-b1955e180a53','keep-alive','1981040oLtUlz','Connection','axios',']\x20POST\x20/generate','DEV_SUMMERISE_TITLE_API','Cache-Control','330faa6c-f844-4e92-b29c-b72dfcc27cfa','Please\x20Wait','Searching','uuid','uiFZuraB8bSmIBMpUH8rg8bQguB3','stringify',']\x20Generate\x20failed:\x20','listen','34865DnLKmb','event:\x20end\x0adata:\x20[DONE]\x0a\x0a','use','STG','event:\x20step\x0adata:\x20','floor','event:\x20text\x0adata:\x20','671ZoUQsC','data',']\x20Stream\x20completed',']\x20Missing\x20prompt\x20in\x20request','static',']\x20Generate\x20v2\x20failed:\x20','json','event:\x20error\x0adata:\x20','NONEY',']\x20Failed\x20to\x20summarize\x20title:\x20','random','connecting','stream','oB3qkWuOcTVh21NGWHudqFrxxmt1','Configuration\x20error','searching','text/event-stream','DEV_GENERATE_API','[Error][','log','1DLXXbz'];a0_0x3ba7=function(){return _0x13c700;};return a0_0x3ba7();}async function useGenerateFrom(_0x38eada){const _0x5d746d=a0_0x1b7824,_0x9939be=_0x38eada['requestId'];if(FROM==='PROD'){const _0x473a4d=process[_0x5d746d(0x176)]['PROD_GENERATE_API'];return console[_0x5d746d(0x12d)](_0x5d746d(0x177)+_0x9939be+']\x20Using\x20PROD\x20API'),axios({'method':_0x5d746d(0x151),'url':_0x473a4d,'data':{..._0x38eada[_0x5d746d(0x168)],'type':_0x5d746d(0x135),'file_url':[],'org_id':'synapse','uid':'oB3qkWuOcTVh21NGWHudqFrxxmt1','regenerate':![],'style':_0x5d746d(0x140),'recaching':![],'cache_id':null,'file_data':'','prompt_id':_0x5d746d(0x172),'new_prompt':'','by':_0x5d746d(0x127)},'headers':{'Content-Type':_0x5d746d(0x175),'X-Request-ID':_0x9939be},'responseType':_0x5d746d(0x126)});}else{if(FROM===_0x5d746d(0x18b)){const _0x804b32=process[_0x5d746d(0x176)][_0x5d746d(0x171)];return console[_0x5d746d(0x12d)](_0x5d746d(0x177)+_0x9939be+_0x5d746d(0x136)),axios({'method':'post','url':_0x804b32,'data':{..._0x38eada['body'],'type':_0x5d746d(0x135),'file_url':[],'org_id':_0x5d746d(0x167),'uid':'xePSzT4DmZQ8G9UkUyeGtF5GEyP2','regenerate':![],'style':_0x5d746d(0x140),'recaching':![],'cache_id':null,'file_data':'','prompt_id':'e5bd012b-b55a-4364-ae8b-50188234214a','new_prompt':'','by':_0x5d746d(0x14c),'session_id':_0x5d746d(0x14c)},'headers':{'Content-Type':_0x5d746d(0x175),'X-Request-ID':_0x9939be},'responseType':_0x5d746d(0x126)});}else{const _0x1418a1=process[_0x5d746d(0x176)][_0x5d746d(0x12b)];return console['log'](_0x5d746d(0x177)+_0x9939be+']\x20Using\x20DEV\x20API'),axios({'method':_0x5d746d(0x151),'url':_0x1418a1,'data':{..._0x38eada[_0x5d746d(0x168)],'type':_0x5d746d(0x135),'file_url':[],'org_id':_0x5d746d(0x167),'uid':_0x5d746d(0x184),'regenerate':![],'style':'Concise','recaching':!![],'cache_id':null,'file_data':'','prompt_id':'8225ec42-b917-4527-b287-6dbaef35bdd7','new_prompt':'','by':_0x5d746d(0x184),'session_id':_0x5d746d(0x165)},'headers':{'Content-Type':_0x5d746d(0x175),'X-Request-ID':_0x9939be},'responseType':_0x5d746d(0x126)});}}}function a0_0x2e04(_0x47bc61,_0x33bf9e){const _0x3ba7d9=a0_0x3ba7();return a0_0x2e04=function(_0x2e0445,_0x3d9ea5){_0x2e0445=_0x2e0445-0x126;let _0xdec56c=_0x3ba7d9[_0x2e0445];return _0xdec56c;},a0_0x2e04(_0x47bc61,_0x33bf9e);}function useModelsFrom(){const _0x58768b=a0_0x1b7824;if(FROM===_0x58768b(0x162))return{'models':[{'id':_0x58768b(0x16a),'name':_0x58768b(0x144),'google_search':![],'active':_0x58768b(0x155),'from':_0x58768b(0x197),'description':_0x58768b(0x153)},{'id':_0x58768b(0x143),'name':_0x58768b(0x133),'google_search':!![],'active':_0x58768b(0x155),'from':'NONEY','description':'Advanced\x20and\x20powerful.'},{'id':_0x58768b(0x15b),'name':'Gemini\x202.5\x20Flash','google_search':!![],'active':_0x58768b(0x155),'from':'GEMINI','description':_0x58768b(0x16c)},{'id':_0x58768b(0x14f),'name':_0x58768b(0x157),'google_search':![],'active':_0x58768b(0x155),'from':_0x58768b(0x139),'description':_0x58768b(0x138)}],'default_model':{'id':_0x58768b(0x16a),'name':_0x58768b(0x144),'google_search':![],'active':_0x58768b(0x155),'from':_0x58768b(0x197),'description':_0x58768b(0x153)}};else return{'models':[{'id':_0x58768b(0x16a),'name':_0x58768b(0x144),'google_search':![],'active':_0x58768b(0x155),'from':_0x58768b(0x197),'description':'High-end\x20and\x20smart.'},{'id':_0x58768b(0x143),'name':_0x58768b(0x133),'google_search':!![],'active':'True','from':_0x58768b(0x197),'description':'Advanced\x20and\x20powerful.'},{'id':_0x58768b(0x15b),'name':'Gemini\x202.5\x20Flash','google_search':!![],'active':_0x58768b(0x155),'from':_0x58768b(0x16e),'description':_0x58768b(0x16c)},{'id':_0x58768b(0x14f),'name':_0x58768b(0x157),'google_search':![],'active':_0x58768b(0x155),'from':_0x58768b(0x139),'description':_0x58768b(0x138)}],'default_model':{'id':_0x58768b(0x16a),'name':_0x58768b(0x144),'google_search':![],'active':_0x58768b(0x155),'from':_0x58768b(0x197),'description':_0x58768b(0x153)}};}app[a0_0x1b7824(0x148)]('/get_models',(_0x31012c,_0x2df8d5)=>{const _0x541086=a0_0x1b7824;console[_0x541086(0x12d)](_0x541086(0x132)+_0x31012c[_0x541086(0x146)]+_0x541086(0x164)),_0x2df8d5[_0x541086(0x195)](useModelsFrom());}),app[a0_0x1b7824(0x151)](a0_0x1b7824(0x16f),async(_0x5802f9,_0x2e2de1)=>{const _0x42b1dd=a0_0x1b7824,_0x1d0113=_0x5802f9[_0x42b1dd(0x146)];console[_0x42b1dd(0x12d)](_0x42b1dd(0x132)+_0x1d0113+']\x20POST\x20/summarise_title');const {prompt:_0x497f19}=_0x5802f9[_0x42b1dd(0x168)];if(!_0x497f19)return console['log'](_0x42b1dd(0x12c)+_0x1d0113+_0x42b1dd(0x192)),_0x2e2de1[_0x42b1dd(0x13b)](0x190)[_0x42b1dd(0x195)]({'error':_0x42b1dd(0x159)});try{const _0x1eed19=await axios[_0x42b1dd(0x151)](process['env'][_0x42b1dd(0x17e)],{'prompt':_0x497f19,'prompt_id':_0x42b1dd(0x178),'org_id':'synapses','chat_id':_0x42b1dd(0x180),'user_id':_0x42b1dd(0x14e)},{'headers':{'X-Request-ID':_0x1d0113}});console[_0x42b1dd(0x12d)]('[Success]['+_0x1d0113+_0x42b1dd(0x15a)),_0x2e2de1[_0x42b1dd(0x195)](_0x1eed19[_0x42b1dd(0x190)]);}catch(_0x5e9557){console[_0x42b1dd(0x12d)](_0x42b1dd(0x12c)+_0x1d0113+_0x42b1dd(0x198)+_0x5e9557[_0x42b1dd(0x13c)]),_0x2e2de1[_0x42b1dd(0x13b)](0x1f4)[_0x42b1dd(0x195)]({'error':_0x42b1dd(0x147)});}}),app['post']('/generate',async(_0x238ab8,_0x2bfa18)=>{const _0x4e2a70=a0_0x1b7824,_0x5cc03e=_0x238ab8['requestId'];console[_0x4e2a70(0x12d)]('[API]['+_0x5cc03e+_0x4e2a70(0x17d));try{_0x2bfa18[_0x4e2a70(0x134)](_0x4e2a70(0x174),_0x4e2a70(0x12a)),_0x2bfa18[_0x4e2a70(0x134)](_0x4e2a70(0x17f),_0x4e2a70(0x160)),_0x2bfa18['setHeader'](_0x4e2a70(0x17b),_0x4e2a70(0x179)),_0x2bfa18[_0x4e2a70(0x142)](_0x4e2a70(0x18c)+JSON[_0x4e2a70(0x185)]({'id':uuidv4(),'data':[{'type':_0x4e2a70(0x19a),'title':_0x4e2a70(0x181),'description':'Search\x20for\x20the\x20latest\x20news\x20on\x20the\x20Iran-Israel\x20conflict'}]})+'\x0a\x0a'),_0x2bfa18[_0x4e2a70(0x142)](_0x4e2a70(0x18c)+JSON[_0x4e2a70(0x185)]({'id':uuidv4(),'data':[{'type':_0x4e2a70(0x129),'title':_0x4e2a70(0x182)}]})+'\x0a\x0a');const _0x547450=uuidv4(),_0x5ce1ff=await useGenerateFrom(_0x238ab8);if(!_0x5ce1ff){console[_0x4e2a70(0x12d)](_0x4e2a70(0x12c)+_0x5cc03e+']\x20No\x20response\x20from\x20generate\x20function'),_0x2bfa18[_0x4e2a70(0x13b)](0x1f4)[_0x4e2a70(0x195)]({'error':_0x4e2a70(0x128)});return;}console[_0x4e2a70(0x12d)](_0x4e2a70(0x13e)+_0x5cc03e+']\x20Starting\x20data\x20stream'),_0x5ce1ff['data']['on']('data',_0x13e6c6=>{const _0x1ba30d=_0x4e2a70,_0x94b879=_0x13e6c6['toString']();if(_0x94b879){const _0x58ff0e={'index':0x0,'id':_0x547450,'data':_0x94b879};_0x2bfa18[_0x1ba30d(0x142)](_0x1ba30d(0x18e)+JSON[_0x1ba30d(0x185)](_0x58ff0e)+'\x0a\x0a');}}),_0x5ce1ff[_0x4e2a70(0x190)]['on'](_0x4e2a70(0x150),()=>{const _0x3b6dc1=_0x4e2a70;console[_0x3b6dc1(0x12d)](_0x3b6dc1(0x13e)+_0x5cc03e+']\x20Completed\x20successfully'),_0x2bfa18[_0x3b6dc1(0x142)](_0x3b6dc1(0x18c)+JSON[_0x3b6dc1(0x185)]({'id':uuidv4(),'data':[{'type':_0x3b6dc1(0x149),'title':'Finished'}]})+'\x0a\x0a'),_0x2bfa18[_0x3b6dc1(0x142)](_0x3b6dc1(0x189)),_0x2bfa18[_0x3b6dc1(0x150)]();}),_0x5ce1ff[_0x4e2a70(0x190)]['on'](_0x4e2a70(0x131),_0x20f14c=>{const _0x1ddf81=_0x4e2a70;console['log'](_0x1ddf81(0x12c)+_0x5cc03e+_0x1ddf81(0x16d)+_0x20f14c[_0x1ddf81(0x13c)]),_0x2bfa18[_0x1ddf81(0x142)](_0x1ddf81(0x196)+JSON[_0x1ddf81(0x185)]({'error':_0x20f14c[_0x1ddf81(0x13c)]})+'\x0a\x0a'),_0x2bfa18['end']();});}catch(_0x293f0f){console[_0x4e2a70(0x12d)](_0x4e2a70(0x12c)+_0x5cc03e+_0x4e2a70(0x186)+_0x293f0f[_0x4e2a70(0x13c)]),_0x2bfa18[_0x4e2a70(0x13b)](0x1f4)[_0x4e2a70(0x195)]({'error':'Failed\x20to\x20proxy\x20/generate'});}}),app[a0_0x1b7824(0x151)](a0_0x1b7824(0x13f),async(_0x2656a8,_0x345ba6)=>{const _0x2bde4c=a0_0x1b7824,_0x3ec2f4=_0x2656a8[_0x2bde4c(0x146)];console[_0x2bde4c(0x12d)](_0x2bde4c(0x132)+_0x3ec2f4+_0x2bde4c(0x15c));try{_0x345ba6[_0x2bde4c(0x134)](_0x2bde4c(0x174),_0x2bde4c(0x12a)),_0x345ba6[_0x2bde4c(0x134)](_0x2bde4c(0x17f),_0x2bde4c(0x160)),_0x345ba6['setHeader'](_0x2bde4c(0x17b),_0x2bde4c(0x179));const _0x3d7b56=Math[_0x2bde4c(0x18d)](Math[_0x2bde4c(0x199)]()*dummyData[_0x2bde4c(0x152)]),_0x3e2625=dummyData[_0x3d7b56];console[_0x2bde4c(0x12d)](_0x2bde4c(0x14b)+_0x3ec2f4+_0x2bde4c(0x12f)+_0x3d7b56);let _0x26394a=0x0;for(let _0x23cb8c=0x0;_0x23cb8c<_0x3e2625[_0x2bde4c(0x152)];_0x23cb8c++){const _0x1e0300=_0x3e2625[_0x23cb8c],_0x1c41c2=uuidv4();if(_0x1e0300[_0x2bde4c(0x15d)]===_0x2bde4c(0x161)){const _0x15620a=_0x1e0300[_0x2bde4c(0x190)];let _0x49a2c0=0x0;while(_0x49a2c0<_0x15620a['length']){const _0x46b1a4=Math['floor'](Math['random']()*(0x32-0x14+0x1))+0x14,_0x18bf69=_0x15620a[_0x2bde4c(0x13a)](_0x49a2c0,_0x49a2c0+_0x46b1a4);_0x49a2c0+=_0x46b1a4;const _0x1b227e={'index':_0x26394a,'id':_0x1c41c2,'data':_0x18bf69};_0x345ba6['write'](_0x2bde4c(0x18e)+JSON[_0x2bde4c(0x185)](_0x1b227e)+'\x0a\x0a');const _0x402100=Math['floor'](Math['random']()*(0x12c-0x64+0x1))+0x64;await new Promise(_0x192ae7=>setTimeout(_0x192ae7,_0x402100));}}else{if(_0x1e0300['type']===_0x2bde4c(0x163)||_0x1e0300['type']===_0x2bde4c(0x137)){const _0x74a503={'id':_0x1c41c2,'data':_0x1e0300[_0x2bde4c(0x190)]};_0x345ba6[_0x2bde4c(0x142)]('event:\x20'+_0x1e0300[_0x2bde4c(0x15d)]+_0x2bde4c(0x170)+JSON[_0x2bde4c(0x185)](_0x74a503)+'\x0a\x0a');const _0x2dc5d9=Math['floor'](Math['random']()*(0x12c-0x64+0x1))+0x64;await new Promise(_0x3c265c=>setTimeout(_0x3c265c,_0x2dc5d9));}else{const _0x25e56c={'index':_0x26394a,'id':_0x1c41c2,'data':_0x1e0300[_0x2bde4c(0x190)]};_0x345ba6[_0x2bde4c(0x142)]('event:\x20'+_0x1e0300[_0x2bde4c(0x15d)]+'\x0adata:\x20'+JSON[_0x2bde4c(0x185)](_0x25e56c)+'\x0a\x0a');const _0x548893=Math[_0x2bde4c(0x18d)](Math[_0x2bde4c(0x199)]()*(0x12c-0x64+0x1))+0x64;await new Promise(_0x32d2c8=>setTimeout(_0x32d2c8,_0x548893));}}_0x1e0300[_0x2bde4c(0x15d)]!==_0x2bde4c(0x163)&&_0x1e0300[_0x2bde4c(0x15d)]!==_0x2bde4c(0x137)&&_0x26394a++;}console[_0x2bde4c(0x12d)](_0x2bde4c(0x14b)+_0x3ec2f4+_0x2bde4c(0x191)),_0x345ba6[_0x2bde4c(0x150)]();}catch(_0x57de09){console[_0x2bde4c(0x12d)](_0x2bde4c(0x12c)+_0x3ec2f4+_0x2bde4c(0x194)+_0x57de09['message']),_0x345ba6['status'](0x1f4)[_0x2bde4c(0x195)]({'error':_0x2bde4c(0x130)});}}),app[a0_0x1b7824(0x148)](a0_0x1b7824(0x14d),(_0x4d729b,_0x313ddf)=>{const _0x331e1a=a0_0x1b7824;console[_0x331e1a(0x12d)](_0x331e1a(0x132)+_0x4d729b[_0x331e1a(0x146)]+']\x20GET\x20/health'),_0x313ddf['json']({'status':'ok'});}),app[a0_0x1b7824(0x187)](PORT,()=>{console['log']('[Server]\x20Running\x20on\x20http://localhost:'+PORT);});